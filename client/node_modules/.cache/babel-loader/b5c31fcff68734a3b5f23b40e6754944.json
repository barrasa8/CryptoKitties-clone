{"ast":null,"code":"import _defineProperty from\"/home/ismael/Documents/Projects/GIT/CryptoKitties-clone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/home/ismael/Documents/Projects/GIT/CryptoKitties-clone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ismael/Documents/Projects/GIT/CryptoKitties-clone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/ismael/Documents/Projects/GIT/CryptoKitties-clone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/ismael/Documents/Projects/GIT/CryptoKitties-clone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/ismael/Documents/Projects/GIT/CryptoKitties-clone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/ismael/Documents/Projects/GIT/CryptoKitties-clone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Container,Row,Button,InputGroup,FormControl,Badge}from\"react-bootstrap\";import PandaCard from\"./PandaCard\";import{epochToUTCDate,getPanda,setOffer,removeOffer,getOffer,setApprovalForAll,buyPanda}from\"../assets/js/utils\";import\"../assets/css/pandaDetail.css\";var PandaDetail=/*#__PURE__*/function(_Component){_inherits(PandaDetail,_Component);var _super=_createSuper(PandaDetail);function PandaDetail(){var _this;_classCallCheck(this,PandaDetail);_this=_super.call(this);_this.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();if(!(_this.state.offer===undefined)){_context.next=6;break;}_context.next=4;return setOffer(_this.props.marketContract,_this.props.accounts,_this.props.web3.utils.toWei(String(_this.state.amount)),_this.props.match.params.id);case 4:_context.next=13;break;case 6:if(!(_this.props.accounts[0]===_this.state.offer.seller)){_context.next=11;break;}_context.next=9;return removeOffer(_this.props.marketContract,_this.props.accounts,_this.props.match.params.id);case 9:_context.next=13;break;case 11:_context.next=13;return buyPanda(_this.props.marketContract,_this.props.accounts,_this.props.match.params.id,_this.state.offer.price);case 13:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleChange=function(event){event.preventDefault();event.persist();_this.setState(function(){return _defineProperty({},event.target.name,parseInt(event.target.value));});};_this.handleRemove=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();_context2.next=3;return removeOffer(_this.props.marketContract,_this.props.accounts,_this.props.match.params.id);case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref3.apply(this,arguments);};}();_this._setApprovalForAll=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var _isApprovedForAll;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setApprovalForAll(_this.props.contract,_this.props.marketContract,_this.props.accounts,true);_context3.next=3;return _this.props.contract.methods.isApprovedForAll(_this.props.accounts[0],_this.props.marketContract.options.address).call();case 3:_isApprovedForAll=_context3.sent;_this.setState(function(){return{IsMarketOpperator:_isApprovedForAll};});case 5:case\"end\":return _context3.stop();}}},_callee3);}));_this.state={pandaItem:null,amount:0,offer:{seller:\"\",price:0,index:0,tokenId:0,active:false},pandaOwner:0,IsMarketOpperator:false};return _this;}_createClass(PandaDetail,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var _pandaItem,_offer,_ownerOf,_isApprovedForAll;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return this.props.contract.methods.isApprovedForAll(this.props.accounts[0],this.props.marketContract.options.address).call();case 3:_isApprovedForAll=_context4.sent;this.setState(function(){return{IsMarketOpperator:_isApprovedForAll};});_context4.next=10;break;case 7:_context4.prev=7;_context4.t0=_context4[\"catch\"](0);console.log(\"Not approved for all\",_context4.t0);case 10:_context4.prev=10;_context4.next=13;return getPanda(this.props.contract,this.props.accounts,this.props.match.params.id);case 13:_pandaItem=_context4.sent;_context4.next=19;break;case 16:_context4.prev=16;_context4.t1=_context4[\"catch\"](10);console.log(\"No Pandas\");case 19:_context4.prev=19;_context4.next=22;return getOffer(this.props.marketContract,this.props.accounts,this.props.match.params.id);case 22:_offer=_context4.sent;if(_offer.active===false){_offer=undefined;}_context4.next=29;break;case 26:_context4.prev=26;_context4.t2=_context4[\"catch\"](19);console.log(\"No offer\");case 29:_context4.prev=29;_context4.next=32;return this.props.contract.methods.ownerOf(this.props.match.params.id).call({from:this.props.accounts[0]});case 32:_ownerOf=_context4.sent;_context4.next=38;break;case 35:_context4.prev=35;_context4.t3=_context4[\"catch\"](29);console.log(\"Error: executing OwnerOf\");case 38:this.setState(function(){return{pandaItem:_pandaItem,offer:_offer,pandaOwner:_ownerOf};});case 39:case\"end\":return _context4.stop();}}},_callee4,this,[[0,7],[10,16],[19,26],[29,35]]);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(Container,{fluid:true},/*#__PURE__*/React.createElement(Row,{className:\"justify-content-md-center body-title body-title-font\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Set your offer\")),this.state.pandaItem!=null?/*#__PURE__*/React.createElement(Row,{className:\"justify-content-md-center\"},/*#__PURE__*/React.createElement(PandaCard,{key:\"panda-card-\"+this.state.pandaItem.pandaTokenId.toString(),dna:this.state.pandaItem.dna,mumId:this.state.pandaItem.mumId,dadId:this.state.pandaItem.dadId,generation:this.state.pandaItem.generation,birthTime:epochToUTCDate(this.state.pandaItem.birthTime),className:\"cursor-pointer\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"space-between-elements\"}),/*#__PURE__*/React.createElement(\"div\",null,this.state.offer!==undefined?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h4\",null,/*#__PURE__*/React.createElement(Badge,{variant:\"secondary\"},\"Owner: \",this.state.offer.seller)),/*#__PURE__*/React.createElement(\"h4\",null,/*#__PURE__*/React.createElement(Badge,{variant:\"secondary\"},\"Price: \",this.props.web3.utils.fromWei(String(this.state.offer.price),'ether'),\" ETH\"))):\"\",this.state.IsMarketOpperator===false&this.state.pandaOwner==this.props.accounts[0]?/*#__PURE__*/React.createElement(Button,{id:\"btn-permissions\",onClick:this._setApprovalForAll},\"Delegate Operator rights\"):\"\",/*#__PURE__*/React.createElement(\"form\",{id:\"panda-detail-offer\",onSubmit:this.handleSubmit},this.state.offer==undefined?/*#__PURE__*/React.createElement(\"div\",null,this.state.pandaOwner==this.props.accounts[0]?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(InputGroup,{className:\"mb-3\"},/*#__PURE__*/React.createElement(FormControl,{\"aria-label\":\"Amount\",name:\"amount\",onChange:this.handleChange}),/*#__PURE__*/React.createElement(InputGroup.Append,null,/*#__PURE__*/React.createElement(InputGroup.Text,null,\"ETH\"))),/*#__PURE__*/React.createElement(Button,{variant:\"success\",type:\"submit\"},\"Sell\")):\"\"):/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"space-between-elements\"}),this.props.accounts[0]==this.state.offer.seller?/*#__PURE__*/React.createElement(Button,{variant:\"danger\",type:\"submit\"},\"Remove Offer\"):/*#__PURE__*/React.createElement(Button,{variant:\"success\",type:\"submit\"},\"Buy Me\"))))):\"\");}}]);return PandaDetail;}(Component);export default PandaDetail;","map":{"version":3,"sources":["/home/ismael/Documents/Projects/GIT/CryptoKitties-clone/client/src/components/PandaDetail.jsx"],"names":["React","Component","Container","Row","Button","InputGroup","FormControl","Badge","PandaCard","epochToUTCDate","getPanda","setOffer","removeOffer","getOffer","setApprovalForAll","buyPanda","PandaDetail","handleSubmit","event","preventDefault","state","offer","undefined","props","marketContract","accounts","web3","utils","toWei","String","amount","match","params","id","seller","price","handleChange","persist","setState","target","name","parseInt","value","handleRemove","_setApprovalForAll","contract","methods","isApprovedForAll","options","address","call","_isApprovedForAll","IsMarketOpperator","pandaItem","index","tokenId","active","pandaOwner","console","log","_pandaItem","_offer","ownerOf","from","_ownerOf","pandaTokenId","toString","dna","mumId","dadId","generation","birthTime","fromWei"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Container, Row ,Button, InputGroup,FormControl, Badge} from \"react-bootstrap\";\nimport PandaCard from \"./PandaCard\";\nimport {epochToUTCDate ,getPanda, setOffer, removeOffer,getOffer, setApprovalForAll , buyPanda} from \"../assets/js/utils\";\nimport \"../assets/css/pandaDetail.css\";\n\nclass PandaDetail extends Component {\n\n    constructor() {\n        super();\n        this.state = {\n            pandaItem:null,\n            amount:0,\n            offer:{\n                seller: \"\",\n                price: 0, \n                index: 0, \n                tokenId: 0, \n                active: false\n            },\n            pandaOwner:0,\n            IsMarketOpperator:false\n        };\n    }\n\n    async componentDidMount(){\n        let _pandaItem,_offer,_ownerOf,_isApprovedForAll;\n\n        try{\n            _isApprovedForAll = await this.props.contract.methods.isApprovedForAll(this.props.accounts[0],this.props.marketContract.options.address).call();\n            this.setState(() => ({\n              IsMarketOpperator: _isApprovedForAll   \n            }));\n          } catch(e){\n            console.log(\"Not approved for all\",e);\n          }\n\n        try{\n            _pandaItem = await getPanda(this.props.contract, this.props.accounts,this.props.match.params.id);\n        } catch(e){\n            console.log(\"No Pandas\");\n        }\n        \n        try{\n            _offer = await getOffer(this.props.marketContract, this.props.accounts,this.props.match.params.id);\n            if(_offer.active===false){\n                _offer = undefined;\n            }\n        } catch(e){\n            console.log(\"No offer\");\n        }\n\n        try{\n            _ownerOf=await this.props.contract.methods.ownerOf(this.props.match.params.id).call({ from: this.props.accounts[0] }); \n        } catch(e){\n            console.log(\"Error: executing OwnerOf\");\n        }\n\n        this.setState(() => ({\n            pandaItem: _pandaItem,\n            offer: _offer,\n            pandaOwner: _ownerOf\n          }));\n    }\n\n    handleSubmit= async (event) => {\n        event.preventDefault();\n        if(this.state.offer===undefined){\n            await setOffer(this.props.marketContract, this.props.accounts,this.props.web3.utils.toWei(String(this.state.amount)),this.props.match.params.id);\n        }else if(this.props.accounts[0]===this.state.offer.seller){\n            await removeOffer(this.props.marketContract, this.props.accounts,this.props.match.params.id);\n        }else{ \n            await buyPanda(this.props.marketContract, this.props.accounts,this.props.match.params.id,this.state.offer.price);\n        }       \n    }\n\n    handleChange= (event) => {\n        event.preventDefault();\n        event.persist();\n        this.setState(() => ({\n            [event.target.name]: parseInt(event.target.value)\n          }));\n    }\n\n    handleRemove =  async (event) =>{\n        event.preventDefault();\n        await removeOffer(this.props.marketContract, this.props.accounts,this.props.match.params.id);\n    }\n\n    _setApprovalForAll =  async ()=>  {\n        let _isApprovedForAll;\n        \n        setApprovalForAll(this.props.contract,this.props.marketContract,this.props.accounts,true);\n       \n        _isApprovedForAll = await this.props.contract.methods.isApprovedForAll(this.props.accounts[0],this.props.marketContract.options.address).call();\n       \n        this.setState(() => ({\n          IsMarketOpperator: _isApprovedForAll\n        }));\n    }\n\n    render() { \n        return (  \n            <Container fluid>\n                <Row className=\"justify-content-md-center body-title body-title-font\">\n                    <h1>Set your offer</h1>\n                </Row>\n                {this.state.pandaItem != null ?\n                    <Row className=\"justify-content-md-center\">\n                        <PandaCard\n                            key={\"panda-card-\" + this.state.pandaItem.pandaTokenId.toString()}\n                            dna={this.state.pandaItem.dna}\n                            mumId={this.state.pandaItem.mumId}\n                            dadId={this.state.pandaItem.dadId}\n                            generation={this.state.pandaItem.generation}\n                            birthTime={epochToUTCDate(this.state.pandaItem.birthTime)}\n                            className=\"cursor-pointer\"\n                        />\n                        <span className=\"space-between-elements\"/>\n                        <div>\n                            {this.state.offer !== undefined ?\n                            <div>\n                                <h4><Badge variant=\"secondary\">Owner: {this.state.offer.seller}</Badge></h4>\n                                <h4><Badge variant=\"secondary\">Price: {this.props.web3.utils.fromWei(String(this.state.offer.price), 'ether')} ETH</Badge></h4>\n                            </div>\n                            :\"\"}\n                            {this.state.IsMarketOpperator === false & this.state.pandaOwner ==this.props.accounts[0] ?\n                                        <Button id=\"btn-permissions\" onClick={this._setApprovalForAll}>Delegate Operator rights</Button>\n                            :\"\"}\n                            <form id=\"panda-detail-offer\" onSubmit={this.handleSubmit}>\n                                {this.state.offer == undefined ?\n                                    <div>\n                                        {this.state.pandaOwner ==this.props.accounts[0]?\n                                            <div>\n                                            <InputGroup className=\"mb-3\">\n                                                <FormControl aria-label=\"Amount\" name=\"amount\" onChange={this.handleChange}/>\n                                                <InputGroup.Append>\n                                                    <InputGroup.Text>ETH</InputGroup.Text>\n                                                </InputGroup.Append>\n                                            </InputGroup>\n                                            <Button variant=\"success\" type=\"submit\">Sell</Button>\n                                            </div>\n                                        :\"\"}\n                                    </div>   \n                                :\n                                    <div>\n                                        <span className=\"space-between-elements\"/>\n                                        {this.props.accounts[0]==this.state.offer.seller?\n                                        <Button variant=\"danger\" type=\"submit\">Remove Offer</Button>\n                                        :\n                                        <Button variant=\"success\" type=\"submit\">Buy Me</Button>\n                                        }\n                                    </div>\n                                }\n                            </form>\n                        </div>\n                    </Row>\n                :\"\"}\n            </Container>\n        );\n    }\n}\n \nexport default PandaDetail;\n"]},"metadata":{},"sourceType":"module"}