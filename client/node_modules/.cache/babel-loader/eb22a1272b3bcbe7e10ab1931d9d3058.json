{"ast":null,"code":"import _regeneratorRuntime from\"/home/ismael/Documents/Projects/GIT/CryptoKitties-clone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ismael/Documents/Projects/GIT/CryptoKitties-clone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/ismael/Documents/Projects/GIT/CryptoKitties-clone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/ismael/Documents/Projects/GIT/CryptoKitties-clone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/ismael/Documents/Projects/GIT/CryptoKitties-clone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/ismael/Documents/Projects/GIT/CryptoKitties-clone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Container,Row,Col,Badge}from\"react-bootstrap\";import PandaCard from\"./PandaCard\";import{Link}from'react-router-dom';import{epochToUTCDate,getMarketOffers}from\"../assets/js/utils\";import\"../assets/css/PandaGallery.css\";var PandaMarket=/*#__PURE__*/function(_Component){_inherits(PandaMarket,_Component);var _super=_createSuper(PandaMarket);function PandaMarket(){var _this;_classCallCheck(this,PandaMarket);_this=_super.call(this);_this.state={OfferList:[],offerCount:0};return _this;}_createClass(PandaMarket,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _activeOfferCount,_offerList;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return this.props.marketContract.methods.getActiveOfferCount().call();case 3:_activeOfferCount=_context.sent;_context.prev=4;if(!(_activeOfferCount>0)){_context.next=10;break;}_context.next=8;return getMarketOffers(this.props.contract,this.props.marketContract,this.props.accounts);case 8:_offerList=_context.sent;this.setState(function(){return{offerCount:_activeOfferCount,OfferList:_offerList};});case 10:_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](4);console.log(\"No Market offers\",_context.t0);case 15:_context.next=20;break;case 17:_context.prev=17;_context.t1=_context[\"catch\"](0);console.log(\"no actove offer count--> \",_context.t1);case 20:case\"end\":return _context.stop();}}},_callee,this,[[0,17],[4,12]]);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(Container,{fluid:true},/*#__PURE__*/React.createElement(Row,{className:\"justify-content-md-center body-title body-title-font\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Market Place\")),/*#__PURE__*/React.createElement(Row,{className:\"justify-content-md-center\"},parseInt(this.state.offerCount)===0?/*#__PURE__*/React.createElement(\"h4\",{className:\"body-title-font\"},\"There are no offers right now\"):\"\",this.state.offerCount>0?this.state.OfferList.map(function(Offer){return/*#__PURE__*/React.createElement(\"div\",{key:\"div-\"+Offer.tokenId.toString()},/*#__PURE__*/React.createElement(Col,{key:\"col-\"+Offer.tokenId.toString(),md:3},/*#__PURE__*/React.createElement(Link,{to:\"/pandaDetail/\"+Offer.tokenId.toString()},/*#__PURE__*/React.createElement(PandaCard,{key:\"panda-card-\"+Offer.tokenId.toString(),dna:Offer.dna,mumId:Offer.mumId,dadId:Offer.dadId,generation:Offer.generation,birthTime:epochToUTCDate(Offer.birthTime)})),/*#__PURE__*/React.createElement(\"h3\",null,/*#__PURE__*/React.createElement(Badge,{variant:\"secondary\"},_this2.props.web3.utils.fromWei(String(Offer.price),'ether'),\" ETH\"))),/*#__PURE__*/React.createElement(Col,{md:1}));}):\"\"));}}]);return PandaMarket;}(Component);export default PandaMarket;","map":{"version":3,"sources":["/home/ismael/Documents/Projects/GIT/CryptoKitties-clone/client/src/components/PandaMarket.jsx"],"names":["React","Component","Container","Row","Col","Badge","PandaCard","Link","epochToUTCDate","getMarketOffers","PandaMarket","state","OfferList","offerCount","props","marketContract","methods","getActiveOfferCount","call","_activeOfferCount","contract","accounts","_offerList","setState","console","log","parseInt","map","Offer","tokenId","toString","dna","mumId","dadId","generation","birthTime","web3","utils","fromWei","String","price"],"mappings":"2iCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CAEA,OAASC,SAAT,CAAoBC,GAApB,CAAyBC,GAAzB,CAA+BC,KAA/B,KAA2C,iBAA3C,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,CAEA,OAASC,IAAT,KAAoB,kBAApB,CAEA,OAAQC,cAAR,CAAwBC,eAAxB,KAA8C,oBAA9C,CAEA,MAAO,gCAAP,C,GAEMC,CAAAA,W,0GACJ,sBAAc,6CACZ,wBACA,MAAKC,KAAL,CAAa,CACXC,SAAS,CAAE,EADA,CAEXC,UAAU,CAAC,CAFA,CAAb,CAFY,aAMb,C,6VAM6B,MAAKC,KAAL,CAAWC,cAAX,CAA0BC,OAA1B,CAAkCC,mBAAlC,GAAwDC,IAAxD,E,QAA1BC,iB,oCAGKA,iBAAiB,CAAC,C,iDACDV,CAAAA,eAAe,CAAC,KAAKK,KAAL,CAAWM,QAAZ,CAAqB,KAAKN,KAAL,CAAWC,cAAhC,CAA+C,KAAKD,KAAL,CAAWO,QAA1D,C,QAAjCC,U,eAEA,KAAKC,QAAL,CAAc,iBAAO,CACnBV,UAAU,CAAEM,iBADO,CAEnBP,SAAS,CAAEU,UAFQ,CAAP,EAAd,E,yFAMFE,OAAO,CAACC,GAAR,CAAY,kBAAZ,c,yFAIFD,OAAO,CAACC,GAAR,CAAY,2BAAZ,c,gOAIK,iBACP,mBACE,oBAAC,SAAD,EAAW,KAAK,KAAhB,eACE,oBAAC,GAAD,EAAK,SAAS,CAAC,sDAAf,eACY,6CADZ,CADF,cAIE,oBAAC,GAAD,EAAK,SAAS,CAAC,2BAAf,EACGC,QAAQ,CAAC,KAAKf,KAAL,CAAWE,UAAZ,CAAR,GAAoC,CAApC,cACD,0BAAI,SAAS,CAAC,iBAAd,kCADC,CAEA,EAHH,CAKG,KAAKF,KAAL,CAAWE,UAAX,CAAwB,CAAxB,CACC,KAAKF,KAAL,CAAWC,SAAX,CAAqBe,GAArB,CAAyB,SAACC,KAAD,qBACvB,2BAAK,GAAG,CAAE,OAASA,KAAK,CAACC,OAAN,CAAcC,QAAd,EAAnB,eACE,oBAAC,GAAD,EAAK,GAAG,CAAE,OAASF,KAAK,CAACC,OAAN,CAAcC,QAAd,EAAnB,CAA6C,EAAE,CAAE,CAAjD,eACE,oBAAC,IAAD,EAAM,EAAE,CAAE,gBAAgBF,KAAK,CAACC,OAAN,CAAcC,QAAd,EAA1B,eACE,oBAAC,SAAD,EACE,GAAG,CAAE,cAAgBF,KAAK,CAACC,OAAN,CAAcC,QAAd,EADvB,CAEE,GAAG,CAAEF,KAAK,CAACG,GAFb,CAGE,KAAK,CAAEH,KAAK,CAACI,KAHf,CAIE,KAAK,CAAEJ,KAAK,CAACK,KAJf,CAKE,UAAU,CAAEL,KAAK,CAACM,UALpB,CAME,SAAS,CAAE1B,cAAc,CAACoB,KAAK,CAACO,SAAP,CAN3B,EADF,CADF,cAWE,2CAAI,oBAAC,KAAD,EAAO,OAAO,CAAC,WAAf,EAA4B,MAAI,CAACrB,KAAL,CAAWsB,IAAX,CAAgBC,KAAhB,CAAsBC,OAAtB,CAA8BC,MAAM,CAACX,KAAK,CAACY,KAAP,CAApC,CAAmD,OAAnD,CAA5B,QAAJ,CAXF,CADF,cAcE,oBAAC,GAAD,EAAK,EAAE,CAAE,CAAT,EAdF,CADuB,EAAzB,CADD,CAmBA,EAxBH,CAJF,CADF,CAiCD,C,yBAnEuBvC,S,EAsE1B,cAAeS,CAAAA,WAAf","sourcesContent":["import React, { Component } from \"react\";\n\nimport { Container, Row, Col , Badge} from \"react-bootstrap\";\nimport PandaCard from \"./PandaCard\";\n\nimport { Link} from 'react-router-dom';\n\nimport {epochToUTCDate ,getMarketOffers} from \"../assets/js/utils\";\n\nimport \"../assets/css/PandaGallery.css\"\n\nclass PandaMarket extends Component {\n  constructor() {\n    super();\n    this.state = {\n      OfferList: [],\n      offerCount:0\n    };\n  }\n\n  async componentDidMount() {\n    let _activeOfferCount, _offerList;\n    \n    try{\n      _activeOfferCount = await this.props.marketContract.methods.getActiveOfferCount().call();\n      \n      try{      \n        if(_activeOfferCount>0){\n          _offerList =await getMarketOffers(this.props.contract,this.props.marketContract,this.props.accounts);\n\n          this.setState(() => ({\n            offerCount: _activeOfferCount,\n            OfferList: _offerList\n          }));\n        }\n      } catch(e){\n        console.log(\"No Market offers\",e);\n      }\n  \n    } catch(e){\n      console.log(\"no actove offer count--> \",e);\n    }\n  }\n  \n  render() {\n    return (\n      <Container fluid>\n        <Row className=\"justify-content-md-center body-title body-title-font\">\n                    <h1>Market Place</h1>\n        </Row>\n        <Row className=\"justify-content-md-center\">\n          {parseInt(this.state.offerCount) === 0 ?\n          <h4 className=\"body-title-font\">There are no offers right now</h4>\n          :\"\"\n          }\n          {this.state.offerCount > 0 ?\n            this.state.OfferList.map((Offer) => (\n              <div key={\"div-\" + Offer.tokenId.toString()}>\n                <Col key={\"col-\" + Offer.tokenId.toString()} md={3}>\n                  <Link to={\"/pandaDetail/\"+Offer.tokenId.toString()}>\n                    <PandaCard\n                      key={\"panda-card-\" + Offer.tokenId.toString()}\n                      dna={Offer.dna}\n                      mumId={Offer.mumId}\n                      dadId={Offer.dadId}\n                      generation={Offer.generation}\n                      birthTime={epochToUTCDate(Offer.birthTime)}\n                    />\n                  </Link>                  \n                  <h3><Badge variant=\"secondary\">{this.props.web3.utils.fromWei(String(Offer.price), 'ether')} ETH</Badge></h3>\n                </Col>\n                <Col md={1}></Col>\n              </div>\n            ))\n          :\"\"}\n        </Row>\n      </Container>\n    );\n  }\n}\n\nexport default PandaMarket;\n"]},"metadata":{},"sourceType":"module"}